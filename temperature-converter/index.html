<!DOCTYPE html>
<html>
<head>
	<title>Temperature Converter</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<!-- <link rel="stylesheet" type="text/css" href="./temperature-converter/style.css"> -->
	<link rel="stylesheet" type="text/css" href="./style.css">
</head>
<body>
<section>
	<article class="container">
		<div class="inputs-container">
			<div class="input">
				<input 
					type="text" 
					class="degree-input" 
					placeholder="Type the degree"
					oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
					maxlength="5" 
					autofocus 
				>
				<select class="unit-input">
					<option value="C">Celsius</option>
					<option value="F">Fahrenheit</option>
					<option value="K">Kelvin</option>
					<option value="R">Renkine</option>
				</select>
			</div>
			<div class="output">
				<input 
					type="text" 
					class="degree-output" 
					placeholder="Result"
					oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
					maxlength="5" 
				>
				<select class="unit-output">
					<option value="C">Celsius</option>
					<option value="F" selected>Fahrenheit</option>
					<option value="K">Kelvin</option>
					<option value="R">Renkine</option>
				</select>
			</div>
		</div>
	</article>
</section>
</body>
<!-- <script type="text/javascript" src="./temperature-converter/script.js"></script> -->
<script type="text/javascript" src="./script.js"></script>
</html>
<style type="text/css">
	section {
		padding-top: 15%;
	}
	article {
		width: 70%;
		margin: 0 auto;
	}
	.inputs-container {
		display: flex;
		gap: 10px;
	}
	.input , .output {
		width: 50%;
	}
	.degree-input, .degree-output {
		width: 100%;
		height: 100px;
		font-size: 30px;
		font-family: 'Poppins', 'helvetica';
		background-color: rgba(0,0,0,.5);
		color: white;
		border: 0;
		outline: none;
		padding-left: 20px;
	}
	.unit-input, .unit-output {
		width: 100%;
		height: 60px;
		font-size: 30px;
		font-family: 'Poppins', 'helvetica';
		background-color: rgba(0,0,0,.5);
		color: white;
		border: 0;
		outline: none;
		padding: 0 20px;
	}
	
	@media only screen and (max-width: 700px) {
		article {
			width: 90%;
			margin: 0 auto;
		}
		.inputs-container {
			display: block;
		}
		.input , .output {
			width: 100%;
			margin: 10px 0;
		}
		input, select {
			font-size: 20px;
		}
	}
</style>
<script type="text/javascript">
	const degree_input_input = document.querySelector('.degree-input');
	const degree_input_output = document.querySelector('.degree-output');

	const unit_select_input = document.querySelector('.unit-input');
	const unit_select_output = document.querySelector('.unit-output');

	const convert = (e)=>{
		const parent = e.path[1];
		const input_value = parent.children[0].value;
		const input_unit = parent.children[1].value;
		let output_value;
		let output_unit;
		let to_output; // Where to put the output value
		// Get output's location
		/**
		* Know where to put the output, EX: if user type in output field then 
		* the result should be written in input field and vise versa
		**/
		if (parent.classList.contains('input')) {
			if (e.path[0].classList.contains('unit-input')) {
				console.log('select pressed')
				// @todo recalculate the temperature when user change the unit
			}else {
				// put output in the output field
				output_unit = document.querySelector('.output').children[1].value;
				to_output = document.querySelector('.output').children[0];
			}
		}
		else if (parent.classList.contains('output')) {
			if (e.path[0].classList.contains('unit-output')) {
				console.log('select pressed')
				// @todo recalculate the temperature when user change the unit
			}else {
				// put output in the input field
				output_unit = document.querySelector('.input').children[1].value;
				to_output = document.querySelector('.input').children[0];
			}
		}
		
		// Calculate the temperature
		// For more info about formulas, see: https://www.calculators.org/math/temperature.php#:~:text=Celsius%20Conversion%20Formulas%20Celsius%20to%20Fahrenheit%3A%20F%20%3D,Rankine%3A%20Ra%20%3D%20C%20x%209%2F5%20%2B%20491.67
		/* Celsuis convertion */
		if (input_unit == "C" && output_unit == "C") output_value = input_value; 
		if (input_unit == "C" && output_unit == "F") output_value = input_value * 9/5 + 32; 
		if (input_unit == "C" && output_unit == "K") output_value = input_value + 273.15; 
		if (input_unit == "C" && output_unit == "R") output_value = input_value * 9/5 + 491.67; 
		/* Fahreneit convertion */
		if (input_unit == "F" && output_unit == "C") output_value = (input_value - 32) * (5/9); 
		if (input_unit == "F" && output_unit == "F") output_value = input_value; 
		if (input_unit == "F" && output_unit == "K") output_value = (input_value + 459.67) * (5/9); 
		if (input_unit == "F" && output_unit == "R") output_value = input_value + 459.67; 
		/* Kelvin convertion */
		if (input_unit == "K" && output_unit == "C") output_value = input_value - 273.15; 
		if (input_unit == "K" && output_unit == "F") output_value = (input_value * 9/5) - 459.67; 
		if (input_unit == "K" && output_unit == "K") output_value = input_value; 
		if (input_unit == "K" && output_unit == "R") output_value = (input_value * 9/5); 
		/* Renkine convertion */
		if (input_unit == "R" && output_unit == "C") output_value = (input_value - 491.67) / 1.8; 
		if (input_unit == "R" && output_unit == "F") output_value = input_value - 459.67; 
		if (input_unit == "R" && output_unit == "K") output_value = input_value / 1.8; 
		if (input_unit == "R" && output_unit == "R") output_value = input_value; 

		to_output.value = output_value;
	}
	degree_input_input.onkeyup = convert;
	degree_input_output.onkeyup = convert;
	unit_select_input.onchange = convert;
	unit_select_output.onchange = convert;
</script>