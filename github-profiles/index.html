<!DOCTYPE html>
<html>
<head>
	<title>Github profiles</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<section>
	<article class="container">
		<input class="search" onkeydown="loadData(event)" placeholder="Search for user">
		<div></div>
	</article>
</section>
</body>
<script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js'></script>
<script type="text/javascript" src="script.js"></script>
<script type="text/javascript">
	const APIURL = 'https://api.github.com/users/';

	const container  = document.querySelector('.container div');

	async function getData(name){
		const data = await axios({method:"GET", url: APIURL+name})
		const repos = await axios({method: "GET", url: APIURL+name+'/repos'})
		return { data: data, repos: repos };
	}
	
	async function loadData(e){
		if (e.keyCode == 13) {
			const gettingData = await getData(e.path[0].value);
			const data = gettingData.data.data;
			const public_repos = gettingData.repos.data;

			let repos = ``;

			for (var i = 0; i < 4; i++) {
				repos += `<a href="${public_repos[i].html_url}" target="_blank">${public_repos[i].name}</a>`
			}

			const user = `
			<article class="user">
				<img src="${data.avatar_url}" width="150" height="150">
				<div class="user-info">
					<a href="${data.html_url}" target="_blank"><h3 class="user-name">${data.login}</h3></a>
					<p class="description">${data.bio}</p>
					<div class="quantitative-info">
						<p class="following">Following: ${data.following}</p>
						<p class="followers">Followers: ${data.followers}</p>
						<p class="repo">Repositories: ${data.public_repos}</p>
					</div>
					<div class="pinned-repos">
						${repos}
					</div>
				</div>
			</article>
			`
			container.innerHTML = user;
		}

	}
	// loadData()

</script>
</html>