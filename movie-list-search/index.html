<!DOCTYPE html>
<html>
<head>
	<title>Movie list app</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<section>
	<header class="header">Movie list app</header>
	<article class="movies">
		
	</article>
</section>
</body>
<script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js'></script>
<script type="text/javascript" src="script.js"></script>
</html>
<style>
	header {
		width: 100%;
		height: 50px;
		background-color: rgb(121,99,199);
		color: white;
		display: flex;
		justify-content: center;
		align-items: center;
	}
	.movies {
		display: grid;
		grid-template-columns: 1fr 1fr 1fr 1fr;
		grid-gap: 20px;
		width: 90%;
		margin: 20px auto;
	}
	.movie {
		background-color: white;
		width: 100%;
		height: 400px;
		overflow-y: hidden;
		position: relative;
	}
	.description {
		width: 100%;
		height: 100%;
		background-color: rgb(121,99,199);
		position: absolute;
		bottom: -400px;
		transition: all .2s ease-out;
	}
	.poster {
		width: 100%;
		height: 80%;
	}
</style>
<script type="text/javascript">
	const container = document.querySelector('.movies');
	const movies = document.querySelectorAll('.movie');
	const APIURL = "https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=3fd2be6f0c70a2a598f084ddfb75487c&page=1";
	const IMG_PATH = 'https://image.tmdb.org/t/p/w1280'






	async function getData(){
		const data = await axios({method:'GET', url:APIURL})
		return data.data.results;

	}
	

	async function loadData(){
		const data = await getData();

		for (var i = 0; i < data.length; i++) {
			// console.log(data[i].poster_path)
			// console.log(data[i].original_title)
			// console.log(data[i].overview)
			// console.log(data[i].voteaverage)
			// console.log(data[i].release_date)
			const movie = `
			<div class="movie">
				<img class="poster" src="${IMG_PATH+data[i].poster_path}">
				<div>
					<p>${data[i].original_title}</p>
				</div>
				<div class="description">${data[i].overview}</div>
			</div>
			`
			container.innerHTML += movie


			movies.forEach((movie)=>{
				movie.onmouseover = (e)=>{
					e.path[0].children[2].style.bottom = "0";
				}
				movie.onmouseleave = (e)=>{
					e.path[0].children[2].style.bottom = "-400px";
				}
			})
		}
	}

	loadData()
</script>